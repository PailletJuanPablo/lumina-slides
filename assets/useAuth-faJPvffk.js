import{k as s,r as c,bZ as n,b_ as A,b$ as v,c0 as f,c1 as p}from"./index-BX6f1_Al.js";const e=c(null),u=c(!0);let i=!1;function y(){const h=()=>{try{return{auth:n(),provider:p()}}catch{throw new Error("Authentication service is not ready. Ensure initFirebase() is called in main.ts")}},l=async()=>{const{auth:t,provider:a}=h();try{const r=await f(t,a);return e.value=r.user,r.user}catch(r){const o=r;throw console.error(`[Auth] Login failed: ${o.code} - ${o.message}`),o}},d=async()=>{try{const t=n();await v(t),e.value=null}catch(t){throw console.error("[Auth] Logout failed",t),t}},g=()=>{if(!i)try{const t=n();A(t,a=>{e.value=a,u.value=!1}),i=!0}catch(t){console.warn("[Auth] Failed to attach listener:",t)}};return{user:s(()=>e.value),isAuthenticated:s(()=>!!e.value),isLoading:s(()=>u.value),loginWithGoogle:l,logout:d,initAuthListener:g}}export{y as useAuth};
